# MeetRide Telegram Bot

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞—è–≤–æ–∫ –¥–ª—è MeetRide —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–æ–∫** –≤ –æ–±—â–∏–π —á–∞—Ç –≤–æ–¥–∏—Ç–µ–ª–µ–π
- ‚úÖ **–ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–æ–∫ –ª—é–±—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏ –Ω–æ–≤—ã–º–∏)
- ‚úÖ **–ü–æ–ª–Ω—ã–π workflow** (–ü—Ä–∏–Ω—è—Ç—å ‚Üí –ù–∞—á–∞—Ç—å ‚Üí –ó–∞–≤–µ—Ä—à–∏—Ç—å/–û—Ç–º–µ–Ω–∏—Ç—å)
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö** –ø–æ–ª–µ–π –∑–∞—è–≤–∫–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** –∑–∞ —á–∞—Å –¥–æ –ø–æ–µ–∑–¥–∫–∏
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** (–ø–∞—Å—Å–∞–∂–∏—Ä—ã —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–∫—É –≤–æ–¥–∏—Ç–µ–ª—é)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ botManager.php      # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ webhook.php         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Telegram
‚îî‚îÄ‚îÄ index.php          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24

config/
‚îú‚îÄ‚îÄ config.example.php  # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env.example       # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ secrets.php        # –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ù–ï –≤ Git!)

deploy/
‚îú‚îÄ‚îÄ switch_chat.sh     # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ—Å—Ç/–ø—Ä–æ–¥ —á–∞—Ç–∞–º–∏
‚îú‚îÄ‚îÄ deploy.sh         # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îî‚îÄ‚îÄ backup.sh         # –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

docs/
‚îú‚îÄ‚îÄ SETUP.md          # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
‚îú‚îÄ‚îÄ API.md           # –û–ø–∏—Å–∞–Ω–∏–µ API —Ñ—É–Ω–∫—Ü–∏–π
‚îî‚îÄ‚îÄ WORKFLOW.md      # –û–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/YOUR_USERNAME/meetride-bot.git
cd meetride-bot
```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
cp config/config.example.php config/config.php
cp config/.env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å config.php –∏ .env
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
composer install
```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ –ë–∏—Ç—Ä–∏–∫—Å24:**
```
https://your-domain.com/meetride-bot/index.php?dealId={{ID}}&stage={{–°—Ç–∞–¥–∏—è —Å–¥–µ–ª–∫–∏ (—Ç–µ–∫—Å—Ç)}}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
./deploy/switch_chat.sh test

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º  
./deploy/switch_chat.sh production

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
./deploy/switch_chat.sh status
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
- `logs/webhook.log` - —Å–æ–±—ã—Ç–∏—è –æ—Ç Telegram
- `logs/bitrix.log` - —Å–æ–±—ã—Ç–∏—è –æ—Ç –ë–∏—Ç—Ä–∏–∫—Å24
- `logs/error.log` - –æ—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º—ã

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `.env` –∏ `config/secrets.php`
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ –≤ `logs/`
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/`
3. –°—Ç–∞—Ç—É—Å webhook: `curl https://api.telegram.org/bot{TOKEN}/getWebhookInfo`
